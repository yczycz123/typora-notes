çŸ¥è¯†ç‚¹ï¼šdfs+bfsç»“åˆï¼Œè¿™æ˜¯ä¸€ä¸ªéš¾åº¦è¾ƒé«˜ä¸”æ¯”è¾ƒç‰¹æ®Šçš„é¢˜ç›®ï¼Œè€ƒå¯Ÿäº†å¾ˆå¤šçŸ¥è¯†



[126. å•è¯æ¥é¾™ II - åŠ›æ‰£ï¼ˆLeetCodeï¼‰](https://leetcode.cn/problems/word-ladder-ii/description/)





[ç®—æ³•è®²è§£062ã€å¿…å¤‡ã€‘å®½åº¦ä¼˜å…ˆéå†åŠå…¶æ‰©å±•_å“”å“©å“”å“©_bilibili](https://www.bilibili.com/video/BV1Dw411w7P5/?spm_id_from=333.1391.0.0&vd_source=96c1635797a0d7626fb60e973a29da38)





ä¸€ä¸ªè¦æ³¨æ„çš„åœ°æ–¹ï¼Œä¸‹é¢è¿™æ®µäº¤æ¢åƒä¸‡ä¸èƒ½å†™æˆ

```java
HashSet<String> tmp = curLevel;
curLevel = nextLevel;
nextLevel = tmp;
nextLevel.clear();
```

ä¸‹é¢è¿™æ ·çš„å†™æ³•

```java
curLevel = nextLevel;
nextLevel.clear();
```

å› ä¸ºï¼Œè¿™é‡Œçš„èµ‹å€¼æ—¶å¯¹è±¡èµ‹å€¼ï¼Œç›¸å½“äºèµ‹å€¼çš„åœ°å€ï¼Œå¦‚æœæŒ‰ä¸Šé¢è¿™æ ·å†™ï¼Œç”±äºcurLevelå’ŒnextLeveléƒ½æŒ‡å‘åŒä¸€ä¸ªå¯¹è±¡ï¼ŒnextLevelä¸€æ¸…ç©ºï¼ŒcurLevelä¹Ÿè¢«æ¸…ç©ºäº†







```java
import java.util.*;

class Solution {
    // ç”¨äºå­˜å‚¨æœ€ç»ˆçš„æ‰€æœ‰æœ€çŸ­è·¯å¾„
    List<List<String>> ans = new ArrayList<>();
    // ç”¨äºå­˜å‚¨å½“å‰è·¯å¾„ï¼Œä½¿ç”¨åŒç«¯é˜Ÿåˆ—æ–¹ä¾¿åœ¨å¤´éƒ¨æ’å…¥å•è¯
    Deque<String> path = new ArrayDeque<>();
    // è®°å½•å•è¯ä¹‹é—´çš„è¿æ¥å…³ç³»ï¼Œå½¢æˆåå‘å›¾
    HashMap<String, ArrayList<String>> graph = new HashMap<>();

    public List<List<String>> findLadders(String beginWord, String endWord, List<String> wordList) {
        // å°† wordList è½¬æ¢ä¸º HashSetï¼Œæ–¹ä¾¿å¿«é€ŸæŸ¥æ‰¾
        HashSet<String> wdList = new HashSet<>(wordList);
        // å½“å‰å±‚æ¬¡çš„å•è¯é›†åˆ
        HashSet<String> curLevel = new HashSet<>();
        // ä¸‹ä¸€å±‚æ¬¡çš„å•è¯é›†åˆ
        HashSet<String> nextLevel = new HashSet<>();

        // å¦‚æœç›®æ ‡å•è¯ä¸åœ¨ wordList é‡Œï¼Œç›´æ¥è¿”å›ç©ºç»“æœ
        if (!wdList.contains(endWord)) {
            return ans;
        }

        boolean find = false; // æ ‡è®°æ˜¯å¦æ‰¾åˆ° endWord
        curLevel.add(beginWord); // BFS çš„èµ·ç‚¹
        
        // è¿›è¡Œ BFS æ„å»ºåå‘å›¾
        while (!curLevel.isEmpty()) {
            wdList.removeAll(curLevel); // ç§»é™¤å½“å‰å±‚çš„æ‰€æœ‰å•è¯ï¼Œé¿å…é‡å¤è®¿é—®
            
            for (String word : curLevel) {
                char[] wordCharArray = word.toCharArray();
                
                // å°è¯•ä¿®æ”¹æ¯ä¸ªå­—ç¬¦
                for (int i = 0; i < wordCharArray.length; i++) {
                    char old = wordCharArray[i]; // å¤‡ä»½åŸå§‹å­—ç¬¦
                    
                    for (char j = 'a'; j <= 'z'; j++) {
                        wordCharArray[i] = j;
                        String newWord = new String(wordCharArray);
                        
                        // å¦‚æœ newWord å­˜åœ¨äºå•è¯åˆ—è¡¨ä¸­ï¼Œå¹¶ä¸”ä¸æ˜¯åŸå§‹ word
                        if (!newWord.equals(word) && wdList.contains(newWord)) {
                            if (newWord.equals(endWord)) {
                                find = true; // æ‰¾åˆ°äº†ç›®æ ‡å•è¯
                            }
                            
                            // å»ºç«‹åå‘å›¾ï¼šnewWord -> word
                            graph.putIfAbsent(newWord, new ArrayList<>());
                            graph.get(newWord).add(word);
                            
                            nextLevel.add(newWord);
                        }
                    }
                    
                    wordCharArray[i] = old; // æ¢å¤åŸå§‹å­—ç¬¦ï¼Œå°è¯•ä¸‹ä¸€ä¸ªä½ç½®
                }
            }
            
            // å¦‚æœæ‰¾åˆ°ç›®æ ‡å•è¯ï¼Œåœæ­¢ BFS
            if (find) {
                break;
            } else {
                // äº¤æ¢ curLevel å’Œ nextLevel
                HashSet<String> temp = curLevel;
                curLevel = nextLevel;
                nextLevel = temp;
                nextLevel.clear(); // æ¸…ç©ºä¸‹ä¸€å±‚ï¼Œå‡†å¤‡å­˜å‚¨æ–°çš„å±‚æ¬¡
            }
        }
        
        // å¦‚æœæ‰¾åˆ°äº† endWordï¼Œåˆ™æ‰§è¡Œ DFS è¿›è¡Œè·¯å¾„å›æº¯
        if (find) {
            dfs(endWord, beginWord);
        }
        return ans;
    }

    // é€šè¿‡ DFS è¿›è¡Œè·¯å¾„å›æº¯ï¼Œæ‰¾åˆ°æ‰€æœ‰ä» endWord åˆ° beginWord çš„è·¯å¾„
    public void dfs(String word, String beginWord) {
        path.addFirst(word); // æ·»åŠ å½“å‰å•è¯åˆ°è·¯å¾„
        
        if (word.equals(beginWord)) {
            ans.add(new ArrayList<>(path)); // æ‰¾åˆ°å®Œæ•´è·¯å¾„ï¼Œå­˜å…¥ ans
        } else {
            //éå†æ‰€æœ‰å¯èƒ½çš„å‰é©±å•è¯
             for (String s : graph.get(word)) {
                    dfs(s, beginWord);
              }
        }
        
        path.removeFirst(); // å›æº¯ï¼Œç§»é™¤å½“å‰å•è¯
    }
}

```





##  **ç¤ºä¾‹è®²è§£**

å‡è®¾ï¼š

```
javaå¤åˆ¶ç¼–è¾‘beginWord = "hit"
endWord = "cog"
wordList = ["hot", "dot", "dog", "lot", "log", "cog"]
```

ç›®æ ‡æ˜¯æ‰¾åˆ° `hit` åˆ° `cog` çš„æ‰€æœ‰æœ€çŸ­è½¬æ¢è·¯å¾„ï¼Œæ¯æ¬¡åªèƒ½æ”¹å˜ä¸€ä¸ªå­—æ¯ï¼Œä¸”æ–°å•è¯å¿…é¡»åœ¨ `wordList` ä¸­ã€‚

------

### **ç¬¬ä¸€æ­¥ï¼šBFS å»ºç«‹åå‘å›¾**

- ç¬¬ä¸€å±‚ï¼šä» 

  ```
  hit
  ```

   å‡ºå‘ï¼Œå˜æ¢ 1 ä¸ªå­—æ¯ï¼Œåªèƒ½å˜æˆ 

  ```
  hot
  ```

  ```
  
  graph = { "hot": ["hit"] }
  ```

- ç¬¬äºŒå±‚ï¼šä» 

  ```
  hot
  ```

   å‡ºå‘ï¼Œå¯ä»¥å˜æˆ 

  ```
  dot å’Œ lot
  ```

  ```
  graph = {
    "hot": ["hit"],
    "dot": ["hot"],
    "lot": ["hot"]
  }
  ```

- ç¬¬ä¸‰å±‚ï¼šä» 

  ```
  dot å’Œ lot
  ```

   å‡ºå‘ï¼Œå¯ä»¥å˜æˆ 

  ```
  dog å’Œ log
  ```

  ```
  graph = {
    "hot": ["hit"],
    "dot": ["hot"],
    "lot": ["hot"],
    "dog": ["dot"],
    "log": ["lot"]
  }
  ```

- ç¬¬å››å±‚ï¼šä» 

  ```
  dog å’Œ log
  ```

   å‡ºå‘ï¼Œå˜æˆ 

  ```
  cog
  ```

  ```
  graph = {
    "hot": ["hit"],
    "dot": ["hot"],
    "lot": ["hot"],
    "dog": ["dot"],
    "log": ["lot"],
    "cog": ["dog", "log"]
  }
  ```

  æ‰¾åˆ° 

  ```
  cog
  ```

   ååœæ­¢ BFSã€‚

------

### **ç¬¬äºŒæ­¥ï¼šDFS å›æº¯æ‰¾è·¯å¾„**

DFS ä» `cog` é€†å‘å›æº¯ï¼š

- `cog -> dog -> dot -> hot -> hit`
- `cog -> log -> lot -> hot -> hit`

æœ€ç»ˆå¾—åˆ°ï¼š

```
[["hit", "hot", "dot", "dog", "cog"], 
 ["hit", "hot", "lot", "log", "cog"]]
```

------

## **ğŸš€ æ€»ç»“**

1. **BFS** ç”¨äºæ„å»º **åå‘å›¾**ï¼Œæ‰¾åˆ° `beginWord` åˆ° `endWord` çš„æ‰€æœ‰æœ€çŸ­è·¯å¾„ã€‚
2. **DFS** é€šè¿‡ **å›æº¯** éå†åå‘å›¾ï¼Œä» `endWord` é€†å‘æŸ¥æ‰¾æ‰€æœ‰è·¯å¾„ã€‚

è¿™æ˜¯ä¸€ç§ **åŒå‘æœç´¢ + åå‘å›æº¯** çš„æ–¹æ³•ï¼Œæ¯”å•çº¯çš„æš´åŠ›æœç´¢æ›´é«˜æ•ˆï¼ğŸ¯
