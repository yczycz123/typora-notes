æ²¡åšè¿‡



[169. å¤šæ•°å…ƒç´  - åŠ›æ‰£ï¼ˆLeetCodeï¼‰](https://leetcode.cn/problems/majority-element/description/?envType=study-plan-v2&envId=top-100-liked)



# è‡ªå·±å†™çš„ç”¨å“ˆå¸Œè¡¨åšçš„

```java
class Solution {
    public int majorityElement(int[] nums) {
        int n = nums.length;
        int tar;
        tar = n / 2; // ç›®æ ‡æ•°é‡ï¼Œè¶…è¿‡ä¸€åŠçš„ä¸ªæ•°

        Map<Integer, Integer> map = new HashMap<>(); // ç”¨äºå­˜å‚¨æ¯ä¸ªæ•°å­—å‡ºç°çš„æ¬¡æ•°
        for (int num : nums) {
            // éå†æ•°ç»„ï¼Œå°†æ¯ä¸ªæ•°å­—å‡ºç°çš„æ¬¡æ•°è®°å½•åˆ° map ä¸­
            map.put(num, map.getOrDefault(num, 0) + 1);
        }

        // éå† mapï¼Œæ‰¾åˆ°å‡ºç°æ¬¡æ•°å¤§äº n / 2 çš„æ•°å­—ï¼ˆå³ä¼—æ•°ï¼‰
        for (Map.Entry<Integer, Integer> entry : map.entrySet()) {
            if (entry.getValue() > tar) {
                return entry.getKey(); // è¿”å›ä¼—æ•°
            }
        }

        return 0; // æ­£å¸¸æƒ…å†µä¸ä¼šæ‰§è¡Œåˆ°è¿™é‡Œï¼Œå‡è®¾è¾“å…¥ä¸€å®šå­˜åœ¨ä¼—æ•°
    }
}

```



### âœ… æ—¶é—´å¤æ‚åº¦åˆ†æï¼š

- éå† `nums` æ•°ç»„å¡«å…… `map`ï¼šO(n)
- éå† `map` æŸ¥æ‰¾ä¼—æ•°ï¼šæœ€å¤š O(n)ï¼Œä½†å®é™…ä¼šå°‘å¾ˆå¤šï¼Œå–å†³äºä¸åŒå…ƒç´ çš„æ•°é‡
- **æ€»æ—¶é—´å¤æ‚åº¦ï¼šO(n)**

------

### âœ… ç©ºé—´å¤æ‚åº¦åˆ†æï¼š

- ä½¿ç”¨äº†ä¸€ä¸ª `HashMap` æ¥ç»Ÿè®¡æ¯ä¸ªå…ƒç´ çš„å‡ºç°æ¬¡æ•°ï¼Œæœ€åæƒ…å†µä¸‹ `nums` ä¸­æ²¡æœ‰é‡å¤å…ƒç´ ã€‚
- æ‰€ä»¥ç©ºé—´å¤æ‚åº¦ä¸ºï¼š**O(n)**ï¼ˆæœ€åæƒ…å†µä¸‹ map ä¸­æœ‰ n ä¸ªé”®ï¼‰









# ç©ºé—´ä¼˜åŒ–ç®—æ³•



```java
class Solution {
    public int majorityElement(int[] nums) {
        int candidate = 0; // å½“å‰å€™é€‰çš„ä¼—æ•°
        int count = 0;     // å€™é€‰äººçš„â€œç¥¨æ•°â€

        for (int num : nums) {
            if (count == 0) {
                candidate = num; // å½“è®¡æ•°ä¸º 0 æ—¶ï¼Œæ›´æ–°å€™é€‰äºº
            }
            if (candidate == num) {
                count++; // å¦‚æœå½“å‰æ•°å­—ç­‰äºå€™é€‰äººï¼Œç¥¨æ•°åŠ  1
            } else {
                count--; // å¦åˆ™ç¥¨æ•°å‡ 1ï¼ˆè§†ä½œä¸€ä¸ªâ€œåå¯¹ç¥¨â€ï¼‰
            }
        }

        return candidate; // è¿”å›æœ€ç»ˆç¡®å®šçš„ä¼—æ•°
    }
}

```





## ğŸ§  Boyer-Moore æŠ•ç¥¨ç®—æ³•çš„æœ¬è´¨

### ğŸŒŸ **å‡è®¾å‰æï¼š**

æ•°ç»„ä¸­**ä¸€å®šå­˜åœ¨ä¸€ä¸ªâ€œä¼—æ•°â€**ï¼Œå³æŸä¸ªæ•°çš„å‡ºç°æ¬¡æ•° > âŒŠn/2âŒ‹ã€‚

è¿™ä¸ªå‡è®¾å¾ˆå…³é”®ï¼Œå› ä¸ºå®ƒä¿è¯æˆ‘ä»¬ï¼š

- åœ¨ä¸æ–­åœ°â€œæŠµæ¶ˆâ€è¿‡ç¨‹ä¸­ï¼Œæœ€ç»ˆä¸€å®šèƒ½å‰©ä¸‹è¿™ä¸ªä¼—æ•°ã€‚

------

## ğŸ§± ç±»æ¯”ç†è§£ï¼šä¸€åœºæŠ•ç¥¨æˆ˜ï¼

æƒ³è±¡ä½ ç°åœ¨æ˜¯ä¸»æŒä¸€åœºæŠ•ç¥¨ï¼š

- æœ‰ä¸€ä¸ªäººå¯èƒ½æ˜¯â€œçœŸæ­£çš„èµ¢å®¶â€ï¼ˆä¼—æ•°ï¼‰ï¼Œå…¶ä»–äººéƒ½åªæ˜¯â€œè·¯äººâ€ï¼ˆéä¼—æ•°ï¼‰ã€‚
- æ¯æ¬¡ä½ é‡åˆ°ä¸€ä¸ªäººï¼Œè¦ä¹ˆï¼š
  - å’Œä½ å·²æœ‰çš„å€™é€‰äººç›¸åŒï¼šä»–ç«™åœ¨å€™é€‰äººé˜µè¥ â†’ ç¥¨æ•° +1
  - å’Œä½ å·²æœ‰çš„å€™é€‰äººä¸åŒï¼šä»–åå¯¹å€™é€‰äºº â†’ ç¥¨æ•° -1

ä¸€æ—¦ç¥¨æ•°ä¸º 0ï¼Œå°±è¯´æ˜ï¼š

> å€™é€‰äººè¢«â€œæŠµæ¶ˆâ€å®Œäº†ï¼Œè¿™æ—¶å€™æˆ‘ä»¬é‡æ–°é€‰æ‹©æ–°çš„å€™é€‰äººã€‚

ä½†å…³é”®ç‚¹æ¥äº†ï¼š

- **ä¼—æ•°çš„äººæ•°ä¸€å®šæ¯”æ‰€æœ‰éä¼—æ•°çš„æ€»å’Œè¿˜å¤š**ï¼
- æ‰€ä»¥å“ªæ€•ä½ ä¸­é€”æ¢è¿‡å€™é€‰äººï¼Œæœ€ç»ˆé‚£ä¸ªâ€œçœŸæ­£çš„èµ¢å®¶â€ä¸€å®šä¼šåœ¨æœ€åæ—¶åˆ»èƒœå‡ºï¼

------

### ğŸ§® æ•°å­¦ä¸Šçš„ç›´è§‰

è®¾ä¼—æ•°ä¸º `M`ï¼Œå‡ºç°æ¬¡æ•°ä¸º `countM > n/2`ï¼Œ
 å…¶ä»–æ‰€æœ‰æ•°çš„æ€»å‡ºç°æ¬¡æ•°åŠ èµ·æ¥æ˜¯ `< n/2`ã€‚

å³ä½¿ï¼š

- ä½ å¼€å§‹æ—¶æ²¡é€‰ä¸­ M
- ä¸­é€” count è¢«å…¶ä»–æ•°æŠµæ¶ˆè¿‡
- æœ€åä¸€å®šæ˜¯ M çš„åŠ›é‡å‹å€’æ‰€æœ‰äºº

**å› ä¸ºï¼š** æŠµæ¶ˆè¿‡ç¨‹ä¸­æ¯æ¬¡é‡åˆ°ä¸åŒçš„æ•°éƒ½ä¼šæ¶ˆè€—æ‰ä¸€æ¬¡â€œç¥¨â€ï¼Œè€Œä¼—æ•°çš„ç¥¨æ˜¯æœ€å¤šçš„ï¼Œå®ƒä¸€å®šæ’‘åˆ°æœ€åï¼



## ä¸¾ä¾‹å­

### ğŸ“Œ ç¤ºä¾‹æ•°ç»„ï¼š

```

nums = [3, 3, 4, 2, 3, 3, 2, 3]
```

è¿™ä¸ªæ•°ç»„é•¿åº¦æ˜¯ 8ï¼Œå‡ºç°æ¬¡æ•° > 8 / 2 = 4 çš„æ•°å°±æ˜¯ä¼—æ•°ã€‚
 æˆ‘ä»¬å¯ä»¥çœ‹åˆ° `3` å‡ºç°äº† **5 æ¬¡**ï¼Œæ˜¯ä¼—æ•°ã€‚

------

### ğŸš€ Boyer-Moore æŠ•ç¥¨è¿‡ç¨‹ï¼š

æˆ‘ä»¬ç”¨ä¸¤ä¸ªå˜é‡ï¼š

- `candidate`ï¼šå½“å‰å€™é€‰äºº
- `count`ï¼šå€™é€‰äººçš„â€œç¥¨æ•°â€

------

| i    | num  | candidate | count | æ“ä½œè¯´æ˜                                          |
| ---- | ---- | --------- | ----- | ------------------------------------------------- |
| 0    | 3    | 3         | 1     | åˆå§‹åŒ–å€™é€‰äººä¸º 3ï¼Œcount è®¾ä¸º 1                    |
| 1    | 3    | 3         | 2     | åˆæ˜¯ 3ï¼Œcount +1                                  |
| 2    | 4    | 3         | 1     | ä¸æ˜¯ 3ï¼Œcount -1                                  |
| 3    | 2    | 3         | 0     | ä¸æ˜¯ 3ï¼Œcount -1 â†’ å½’é›¶äº†ï¼Œè¯´æ˜å½“å‰å€™é€‰äººè¢«â€œæŠµæ¶ˆâ€ |
| 4    | 3    | 3         | 1     | count ä¸º 0ï¼Œé‡æ–°é€‰æ‹©å€™é€‰äººä¸º 3                    |
| 5    | 3    | 3         | 2     | åˆæ˜¯ 3ï¼Œcount +1                                  |
| 6    | 2    | 3         | 1     | ä¸æ˜¯ 3ï¼Œcount -1                                  |
| 7    | 3    | 3         | 2     | æ˜¯ 3ï¼Œcount +1                                    |

------

### âœ… æœ€ç»ˆç»“æœï¼š

- `candidate = 3`
- `count = 2`

è™½ç„¶ count æ²¡æœ‰ç‰¹åˆ«å¤§ï¼Œä½†å®ƒå·²ç»æ˜¯â€œå¹¸å­˜è€…â€äº†ï¼Œå› ä¸ºï¼š

> æ‰€æœ‰éä¼—æ•°æœ€ç»ˆéƒ½è¢«å®ƒâ€œä¸€ä¸€æŠµæ¶ˆâ€æ‰äº†ã€‚

------

### âœ¨ ä¸ºä»€ä¹ˆè¿™ä¸ªç®—æ³•æˆç«‹ï¼Ÿ

å› ä¸ºï¼š

- ä¼—æ•°å‡ºç° > n/2 æ¬¡
- éä¼—æ•°åŠ èµ·æ¥ < n/2 æ¬¡
- æ‰€ä»¥å®ƒä»¬å…¨éƒ¨å’Œä¼—æ•°â€œå¯¹æ¶ˆâ€ï¼Œæœ€åè¿˜æ˜¯ä¼—æ•°å‰©ä¸‹æ¥